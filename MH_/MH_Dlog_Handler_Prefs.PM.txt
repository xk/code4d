  //@SVN_Folder: MH_/C_TEXT($1;$ObjectName_t)$ObjectName_t:=""If (Count parameters>=1)$ObjectName_t:=$1End if Case of : ($ObjectName_t="MH_DiffTool_o")  // Popup diff toolCase of : (Form event=On Clicked)C_LONGINT($pos)$pos:=Find in array(MH_DiffTool_at;MH_DiffTool_at{0};1)If ($pos>0)MH_DiffTool_at{0}:=MH_DiffCmdLine_at{$pos}MH_Prefs ("set";"ext_diff";->MH_DiffTool_at{0})End if End case : ($ObjectName_t="method_history")  // Check box enable method historyC_TEXT($enabled_t)C_POINTER($cb_methodhistory_p;$cb_savetosvn_p)Case of : (Form event=On Clicked)$cb_methodhistory_p:=OBJECT Get pointer(Object named;"method_history")$cb_savetosvn_p:=OBJECT Get pointer(Object named;"save_to_svn")If ($cb_methodhistory_p->=1)$enabled_t:="enabled"Else $enabled_t:="disabled"$cb_savetosvn_p->:=0MH_Prefs ("set";"svn";->$enabled_t)End if OBJECT SET ENABLED($cb_savetosvn_p->;($enabled_t="enabled"))MH_Prefs ("set";"method_history";->$enabled_t)End case : ($ObjectName_t="repo_root")  // Repo rootCase of : (Form event=On Data Change)CONFIRM("This will create a new repository")If (ok=1)MH_Prefs ("set";"repo_root";OBJECT Get pointer(Object named;"repo_root"))Else MH_Prefs ("get";"repo_root";OBJECT Get pointer(Object named;"repo_root"))End if End case : ($ObjectName_t="repo_name")  // Repo name: ($ObjectName_t="save_to_svn")  // Check box "save to svn"C_TEXT($enabled_t)$enabled_t:=""C_POINTER($svn_save_tosvn_p;$svn_local_p)$svn_local_p:=OBJECT Get pointer(Object named;"svn_local")$svn_save_tosvn_p:=OBJECT Get pointer(Object named;"save_to_svn")Case of : (Form event=On Clicked)If ($svn_save_tosvn_p->=1)$enabled_t:="enabled"If ($svn_local_p->="")$svn_local_p->:=Get 4D folder+"SVN_Local"+Folder separatorMH_Prefs ("set";"svn_local";$svn_local_p)End if Else $enabled_t:="disabled"End if MH_Prefs ("set";"svn";->$enabled_t)End case : ($ObjectName_t="SVN_SelectBttn_o")  // Select SVN folder bttnCase of : (Form event=On Clicked)C_TEXT($svn_local_t)C_POINTER($svn_local_t_p)$svn_local_t_p:=OBJECT Get pointer(Object named;"svn_local")$svn_local_t:=$svn_local_t_p->If (Shift down)If (Test path name($svn_local_t)=Is a directory)SHOW ON DISK($svn_local_t)Else   //ALERT("SVN local fol not defined")End if Else $svn_local_t:=Select folder("Choose SVN local folder";$svn_local_t)If (OK=1)$svn_local_t_p->:=$svn_local_tMH_Prefs ("set";"svn_local";OBJECT Get pointer(Object named;"svn_local"))End if End if End case : ($ObjectName_t="svn_local")  // Path to the local SVN folderCase of : (Form event=On Data Change)CONFIRM("Change the local SVN folder?")If (OK=1)MH_Prefs ("set";"svn_local";OBJECT Get pointer(Object named;"svn_local"))Else MH_Prefs ("get";"svn_local";OBJECT Get pointer(Object named;"svn_local"))End if End case : ($ObjectName_t="svn_url")  // Path to the local SVN folder (Not used yet.. will be used with php svn client)Case of : (Form event=On Data Change)MH_Prefs ("set";"svn_url";OBJECT Get pointer(Object named;"svn_url"))End case : ($ObjectName_t="svn_login")  // Login for SVN server (Not used yet.. will be used with php svn client)Case of : (Form event=On Data Change)MH_Prefs ("set";"svn_login";OBJECT Get pointer(Object named;"svn_login"))End case : ($ObjectName_t="svn_password")  // Login for SVN server (Not used yet.. will be used with php svn client)Case of : (Form event=On Data Change)MH_Prefs ("set";"svn_password";OBJECT Get pointer(Object named;"svn_password"))End case : ($ObjectName_t="ShowPrefsFile_o")  // SHow pref fileSHOW ON DISK(Get 4D folder+"MethodHistoty.prf"): ($ObjectName_t="ShowRepoFile_o")  // Show MH fileCase of : (Form event=On Clicked)SHOW ON DISK(MH_Get_HistoPath )End case : ($ObjectName_t="ShowRepoRoot_o")  //Show MH rootCase of : (Form event=On Clicked)SHOW ON DISK(MH_Get_RepositoryRoot )End case : (Count parameters=0)  // Form methodCase of : (Form event=On Load)C_POINTER($cb_methodhistory_p;$repo_root_p;$repo_name_p;$cb_savetosvn_p;$svn_local_p;$svn_url_p;$svn_login_p;$svn_password_p)C_TEXT($mh_enabled_t;$svn_enabled_t)ARRAY TEXT(MH_DiffTool_at;0)ARRAY TEXT(MH_DiffCmdLine_at;0)APPEND TO ARRAY(MH_DiffTool_at;"Perforce")APPEND TO ARRAY(MH_DiffCmdLine_at;"p4merge -C 'utf8' %old %new")APPEND TO ARRAY(MH_DiffTool_at;"Tortoise Merge")APPEND TO ARRAY(MH_DiffCmdLine_at;"tortoisemerge %old %new")APPEND TO ARRAY(MH_DiffTool_at;"WinMerge")APPEND TO ARRAY(MH_DiffCmdLine_at;"WinMergeU %old %new")APPEND TO ARRAY(MH_DiffTool_at;"Text Wrangler")APPEND TO ARRAY(MH_DiffCmdLine_at;"twdiff %old %new")  // $cb_methodhistory_p:=OBJECT Get pointer(Object named;"method_history")$repo_root_p:=OBJECT Get pointer(Object named;"repo_root")$repo_name_p:=OBJECT Get pointer(Object named;"repo_name")$cb_savetosvn_p:=OBJECT Get pointer(Object named;"save_to_svn")$svn_local_p:=OBJECT Get pointer(Object named;"svn_local")$svn_url_p:=OBJECT Get pointer(Object named;"svn_url")$svn_login_p:=OBJECT Get pointer(Object named;"svn_login")$svn_password_p:=OBJECT Get pointer(Object named;"svn_password")$mh_enabled_t:=""$svn_enabled_t:=""  //MH_Prefs ("get";"ext_diff";->MH_DiffTool_at{0})  //MH_Prefs ("get";"repo_root";$repo_root_p)MH_Prefs ("get";"repo_name";$repo_name_p)MH_Prefs ("get";"method_history";->$mh_enabled_t)  //MH_Prefs ("get";"svn";->$svn_enabled_t)MH_Prefs ("get";"svn_local";$svn_local_p)MH_Prefs ("get";"svn_url";$svn_url_p)MH_Prefs ("get";"svn_login";$svn_login_p)MH_Prefs ("get";"svn_password";$svn_password_p)  //$cb_methodhistory_p->:=Num($mh_enabled_t="enabled")$cb_savetosvn_p->:=Num($svn_enabled_t="enabled")  //OBJECT SET FONT(*;"svn_password";"%password")End case End case 